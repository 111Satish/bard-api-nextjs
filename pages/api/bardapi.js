// const { DiscussServiceClient } = require("@google-ai/generativelanguage");
// const { GoogleAuth } = require("google-auth-library");

// const MODEL_NAME = "models/chat-bison-001";
// const API_KEY = "AIzaSyDUzIfsTtJgxLTi57WUtTarhwUO09-4-S4";

// const client = new DiscussServiceClient({
//   authClient: new GoogleAuth().fromAPIKey(API_KEY),
// });



// export default function handler(req, res) {
//     let messages = [{ content: req.query.ques }];
  
// client.generateMessage({
//   // required, which model to use to generate the result
//   model: MODEL_NAME,
//   // optional, 0.0 always uses the highest-probability result
//   temperature: 0.25,
//   // optional, how many candidate results to generate
//   candidateCount: 1,
//   // optional, number of most probable tokens to consider for generation
//   top_k: 40,
//   // optional, for nucleus sampling decoding strategy
//   top_p: 0.95,
//   prompt: {
//     messages: messages,
//   },
// }).then(result => {
//     console.log("First Response:", result[0].candidates[0]?.content);

//     messages.push({ content: result[0].candidates[0]?.content });
//    // console.log(JSON.stringify(result, null, 2));
//     res.status(200).json({ resp: messages })
// });
// }

const { DiscussServiceClient } = require("@google-ai/generativelanguage");
const { GoogleAuth } = require("google-auth-library");

const MODEL_NAME = "models/chat-bison-001";
const API_KEY = "AIzaSyDUzIfsTtJgxLTi57WUtTarhwUO09-4-S4";

const client = new DiscussServiceClient({
  authClient: new GoogleAuth().fromAPIKey(API_KEY),
});

const context = "NIT Trichy, short for the National Institute of Technology,Tiruchirappalli, is one of the premier engineering institutions in India. It was established in 1964 and is located in the state of Tamil Nadu, India. It is consistently ranked among the top engineering institutions in India and is often ranked within the top 10. The campus of NIT Trichy is known for its excellent infrastructure, modern facilities, and lush green surroundings. NIT Trichy offers undergraduate, postgraduate, and doctoral programs in various engineering, technology, and management disciplines. It has a strong placement record, with many leading companies visiting the campus for recruitment. It has produced many successful alumni, including Sundar Pichai, the CEO of Google, and N. R. Narayana Murthy, co-founder of Infosys. NIT Trichy has state-of-the-art research facilities and actively encourages research and innovation among its students and faculty. NIT Trichy hosts an annual technical festival called Pragyan and a cultural festival known as Festember.NIT Trichy has a substantial student intake, with thousands of students enrolled in various programs each year. It has a highly qualified and experienced faculty known for their expertise and contributions to research and education. It offers various scholarships and financial aid options for deserving students based on their academic performance and economic backgrounds. The annual tuition fee for undergraduate programs at NIT Trichy may vary depending on the course and category of the student (general, SC/ST, etc.). It is subject to change, so it is advisable to check the latest information on the official website. It encourages students to engage in extracurricular activities, including sports, cultural events, clubs, and societies. It has a well-stocked library with access to a wide range of books, journals, and digital resources to support academic and research activities and collaborates with various international universities and institutions for research, student exchange programs, and joint academic initiatives. Like Center for Non-Destructive Testing and the National Institute of Technology Science Education and Research (NITSER) Trichy. It has extensive sports facilities, including cricket fields, football fields, basketball courts, and indoor sports complexes for students to engage in sports activities. And it aslo known for its research in various engineering and technology fields, including computer science, mechanical engineering, and civil engineering. Admission to the B.Tech programs at NIT Trichy is primarily based on the JEE Main entrance examination conducted by the National Testing Agency (NTA),  for MCA admission NIMCET Exam conducted by NIT and for M.Tech admission Gate Score require. The NIT Trichy campus is located in Thuvakudi, about 22 kilometers from the heart of Tiruchirappalli. NIT Trichy provides hostel accommodation for its students, and separate hostels are available for male and female students. NIT Trichy hosts an annual alumni meet known as Pragyan Sammilan, which brings together former students to reconnect and network.NIT Trichy has entrepreneurship cells and innovation hubs to nurture entrepreneurial skills and encourage students to develop their own startups. NIT Trichy welcomes international students and offers admission through the Direct Admission of Students Abroad (DASA) scheme and other programs.NIT Trichy collaborates with various industries and has partnerships with companies for internships, projects, and campus placements.NIT Trichy has a wide range of student clubs and societies, covering various interests, including technical, cultural, and sports. NIT Trichy has consistently ranked among the top engineering institutions in India according to the National Institutional Ranking Framework (NIRF).The B.Tech programs at NIT Trichy typically have a duration of four years. NIT Trichy attracts students from various regions of India, leading to a diverse and culturally rich student community. NIT Trichy primarily offers full-time, on-campus programs and does not have a significant number of part-time or distance learning options. NIT Trichy has collaborations with leading companies like Tata Consultancy Services (TCS), Larsen &amp; Toubro (L&amp;T), and others for research, internships, and placement opportunities. NIT Trichy hosts a popular annual technical festival called Pragyan. NIT Trichy has incubation centers and entrepreneurship development programs to support students interested in startups and entrepreneurship. NIT Trichy follows the reservation policy mandated by the Government of India, which includes quotas for various categories like SC, ST, OBC, and EWS. The alumni association of NIT Trichy is known as NITTAA (NIT Trichy Alumni Association). NIT Trichy provides opportunities for interdisciplinary research and programs to encourage a holistic education.NIT Trichy has made significant contributions to research in fields such as renewable energy, structural engineering, and computer science.Yes, NIT Trichy has a Training and Placement Cell (T&amp;P) that facilitates internships and placement opportunities for students. NIT Trichy offers opportunities for international exchange programs and collaborations with universities worldwide.NIT Trichy is involved in research across a wide spectrum of fields, including robotics, artificial intelligence, renewable energy, and nanotechnology.NIT Trichy provides a robust internet infrastructure and Wi-Fi connectivity throughout the campus for students and faculty.Yes, NIT Trichy has a Student Grievance Cell to address and resolve any academic or non-academic issues faced by students.NIT Trichy provides separate hostel accommodation for international students to ensure their comfort and convenience.NIT Trichy collaborates with government organizations like ISRO (Indian Space Research Organisation) and DRDO (Defence Research and Development Organisation) on various research projects.The annual budget of NIT Trichy may vary from year to year and is typically allocated based on the institute's requirements.Yes, NIT Trichy has an Entrepreneurship Cell (E-Cell) that supports and promotes entrepreneurial activities among its students.Hostel accommodation at NIT Trichy is typically allocated based on the preferences and availability, with separate hostels for different courses and genders.Apart from Pragyan and Festember, NIT Trichy students organize various cultural events, technical competitions, and fests throughout the year.Transfers between NITs are possible, but they are subject to specific rules and regulations, and the availability of vacant seats.NIT Trichy has a campus security team and safety measures in place to ensure the well-being of students, faculty, and staff.Yes, NIT Trichy often collaborates with industries and undertakes sponsored research projects in various engineering and technology domains.NIT Trichy's Training and Placement Cell helps students secure internships by inviting companies for campus placements and internships.NIT Trichy often organizes community service initiatives and encourages students to participate in social outreach programs.NIT Trichy has a strong alumni network that often provides mentorship, career guidance, and opportunities to current students.Non-students interested in research positions at NIT Trichy can explore available positions and apply directly through the institute's official website or relevant department.NIT Trichy actively engages in international research collaborations and partnerships with universities and institutions from around the world.NIT Trichy offers scholarships and financial aid programs for economically disadvantaged students to support their education.NIT Trichy takes various initiatives to promote sustainability, including green campus projects and waste management practices.NIT Trichy has a wide array of clubs and societies, including technical clubs, cultural clubs, coding clubs, and more, catering to various interests.The faculty-to-student ratio at NIT Trichy can vary across departments but is generally maintained at a reasonable level to ensure quality education.Yes, NIT Trichy maintains an official website and is active on various social media platforms to share updates and announcements.NIT Trichy offers dual-degree programs, allowing students to earn both a bachelor's and a master's degree in a shorter time frame.NIT Trichy has an Innovation and Entrepreneurship Development Cell (IEDC) that offers training, resources, and mentorship for budding entrepreneurs.NIT Trichy collaborates with other IITs, NITs, and universities across India on various research projects and initiatives.Alumni and former students can request academic transcripts and records through the institute's official transcript request process.NIT Trichy encourages students to participate in leadership development programs, clubs, and co-curricular activities that enhance their overall skills.Yes, NIT Trichy alumni associations can be found in various cities and regions, facilitating networking and interactions among former students.NIT Trichy organizes industry-specific conferences and conclaves to foster interaction between students and industry professionals.NIT Trichy maintains a security team and implements security measures to ensure the safety of students, faculty, and staff.Yes, NIT Trichy students have opportunities to participate in international student exchange programs at partner universitiesNIT Trichy has a strong research output with a significant number of publications in reputed journals and conferences.NIT Trichy often engages in community service activities and initiatives, such as rural development programs and social awareness campaigns.NIT Trichy provides research scholars with guidance and resources to support their Ph.D. studies, including research grants and mentorship.Faculty and students at NIT Trichy can access research funding through government agencies, industry collaborations, and research grants.NIT Trichy houses various centers of excellence and specialized research facilities in fields such as nanotechnology, robotics, and renewable energy.Admission to the Ph.D. programs at NIT Trichy typically involves clearing a written test and interview, along with a strong academic record.Yes, NIT Trichy students often participate in international coding competitions and hackathons, showcasing their skills on a global stage.NIT Trichy's alumni network actively contributes through mentorship, guest lectures, and philanthropic efforts to improve the institute's infrastructure.NIT Trichy offers skill development programs and workshops to enhance students' employability and readiness for the job market.Faculty positions at NIT Trichy are typically advertised, and candidates need to apply as per the institute's recruitment procedures.NIT Trichy encourages research in emerging technologies through dedicated labs, research groups, and collaborations with leading companies.Alumni can apply for duplicate degree certificates or transcripts through the institute's official process by contacting the academic section.NIT Trichy publishes an annual technical journal and various publications that showcase the research and academic contributions of the institute.The official website of NIT Trichy is https://www.nitt.edu.NIT Trichy provides an Innovation and Entrepreneurship Development Cell (IEDC) to foster entrepreneurship among its students.NIT Trichy conducts various national and international research conferences and symposiums across different academic disciplines.NIT Trichy students have achieved success in various national and international competitions, including coding competitions, robotics contests, and more.Yes, NIT Trichy often facilitates mentorship programs that connect current students with alumni for guidance and career advice.NIT Trichy has a history of successful research projects and patents, particularly in fields like renewable energy and materials science. NIT Trichy collaborates with industries through research partnerships, internships, and consultancy services to bridge the gap between academia and the industry.NIT Trichy'sTraining and Placement Cell assists students in securing internships, placements, and career development opportunities. NIT Trichy actively promotes gender diversity and inclusivity through programs, clubs, and support services for female students.NIT Trichy also hosts other cultural events like Milana and Makar Sankranti to celebrate the cultural diversity of the institute.List of professors of Computer Application Department / CA / MCA Dr.S.R.Balasundaram Mobile (Optional): 9994291420 Email (Primary): blsundar@nitt.eduField(s) of Specialization: Web \u0026amp; Mobile Technologies, Cognitive Sciences and e-Learning Technologies. Name Dr. S. NICKOLAS Telephone (Direct): 0431-2503739Email (Primary): nickolas@nitt.edField(s) of Specialization: Data Mining, Machine and Deep Learning, BigData Analytics, Cloud Computing, Software Metrics. Name: Dr.Michael Arock Mobile (Optional): 9842378952Email (Primary): michael@nitt.eduField(s) of Specialization: Name : Dr. Alphonse PJA Telephone (Direct) (Optional):2503742Email (Primary) : alphonse@nitt.eduField(s) of Specialization: : Healthcare Analytics, Image, Video and signal Processing, Cryptography, Wireless Adhoc Networks, Social Network Analysis, Graph and their Algorithms. Name: B. Janet, Mobile : 9442648096 Email : janet(at)nitt(dot)edu Field of Specialization: Information Processing and Security Name : Dr. (Mrs.) S. Sangeetha Mobile : 9442601978Email (Primary) : sangeetha@nitt.eduField(s) of Specialization : Natural Language Processing, Information Extraction Name: Dr.R.Eswari Telephone: 0431-2503744Email (Primary): eswari@nitt.eduField(s) of Specialization: Computational Intelligence, Multi objective Optimization, Cloud Computing, Distributed Scheduling, Cyber security Name: Dr. U. Srinivasulu Reddy Mobile (Optional): 8438207784Email (Primary): usreddy@nitt.eduField(s) of Specialization: Data Analytics, Machine Learning, Artificial Intelligence and Bioinformatics Name : Dr.S. Domnic Mobile (Optional):Email (Primary): domnic@nitt.eduField(s) of Specialization: : Data Compression, Image/Video Analysis, Information Retrieval, Deep Learning for Computer Vision Name: Dr. VISHNU PRIYA R Mobile (Optional):Email (Primary):vishnupriya@nitt.eduField(s) of Specialization: MACHINE AND DEEP LEARNING, IMAGE PROGESSING, COGNITIVE SCIENCE, WEB MINING Name: Dr.S.SAROJA Telephone (Direct) (Optional):Email (Primary): saroja@nitt.eduField(s) of Specialization: Multiprocessor Scheduling, Multi Criteria Decision Making Name: Dr. Vinay Ra Mobile (Optional): 9963850192Email (Primary): vinayraj@nitt.eduField(s) of Specialization: Software Engineering, Service Oriented Architecture, Microservices, Serverless Computing, Machine Learning Name : Dr Sindhia Lingaswamy Mobile (Optional): Email (Primary): sindhia@nitt.eduField(s) of Specialization : Computer Vision, Image Processing, Artificial Intelligence, Machine Learning Name: Dr. Ghanshyam S. Bopche Mobile (Optional): +91-6302295701 Email (Primary): bopche(at)nitt(dot)edu Field(s) of Specialization: Cyber Security, Digital Forensic, and Computer Networks Name: Dr. Jitendra Kumar Mobile (Optional):Email (Primary): jitendra@nitt.eduField(s) of Specialization: Cloud Computing, Machine Learning Name: Dr. Selvakumar K Mobile (Optional): 9486435666Email (Primary): kselvakumar@nitt.eduField(s) of Specialization: Computational Intelligence, Artificial Intelligence, Soft Computing, and Computer Networks Name: Dr.Balaji Banothu Mobile (Optional): 8971027077Email (Primary):balaji@nitt.eduField(s) of Specialization: Image Processing, Image Restoration, Deep Learning, Machine Learning. Name Dr. G. R. GANGADHARAN Mobile (Optional):Email (Primary): ganga@nitt.eduField(s) of Specialization: Internet Technologies (Cloud / Edge Computing), Energy Informatics, Big Data Analytics";

export default function handler(req, res) {
    let messages = [{ content: req.query.ques }];
  
client.generateMessage({
  // required, which model to use to generate the result
  model: MODEL_NAME,
  // optional, 0.0 always uses the highest-probability result
  temperature: 0.25,
  // optional, how many candidate results to generate
  candidateCount: 1,
  // optional, number of most probable tokens to consider for generation
  top_k: 40,
  // optional, for nucleus sampling decoding strategy
  top_p: 0.95,
  prompt: {
    context: context,
    messages: messages,
  },
}).then(result => {
    console.log("First Response:", result[0].candidates[0]?.content);

    messages.push({ content: result[0].candidates[0]?.content });
   // console.log(JSON.stringify(result, null, 2));
    res.status(200).json({ resp: messages })
});
}
